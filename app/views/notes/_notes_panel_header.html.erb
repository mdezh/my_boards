<div id="notes_panel_header" class="notes-panel-header">
  <%= tag.i id: 'back_to_boards', class: 'tapable bi bi-arrow-left ms-3 hidden-md', data: {
    controller: 'set-state',
    set_state_object_value: { active_panel: 'boards' },
    set_state_id_value: 'panel_state',
    action: 'click->set-state#fire',
  } %>
  <span id="notes_header_board_name" class="normal-height text-truncate mx-3 fw-semibold my-1"><%= @board.name %></span>
  <span class="ms-auto"></span>
  <%= tag.span class: "me-3 fw-semibold text-secondary #{@board.owner == current_user ? 'hidden' : ''}", data: {
    controller: 'state-driven',
    state_driven_state_outlet: '#user_board_state',
    state_driven_key_value: 'owned',
    state_driven_not_value: true
  } do %>
    @<%= @board.owner.nickname %>
  <% end %>
  <div class="me-3 dropdown">
    <i class="bi bi-three-dots-vertical" type="button" data-bs-toggle="dropdown" aria-expanded="false"></i>
    <ul class="dropdown-menu">
      <li>
        <%= tag.button 'Details', class: 'dropdown-item', data: {
          controller: 'set-state state-driven',
          set_state_id_value: 'details_state',
          set_state_object_value: { show_details: true },
          action: 'click->set-state#fire',
          state_driven_state_selector_value: '#details_state',
          state_driven_key_value: 'show_details',
          state_driven_not_value: true
        } %>
      </li>
      <li>
        <%= tag.button 'Notes', class: 'dropdown-item', data: {
          controller: 'set-state state-driven',
          set_state_id_value: 'details_state',
          set_state_object_value: { show_details: false },
          action: 'click->set-state#fire',
          state_driven_state_selector_value: '#details_state',
          state_driven_key_value: 'show_details',
        } %>
      </li>
      <li
        data-controller="state-driven"
        data-state-driven-key-value="joined"
        data-state-driven-state-outlet="#user_board_state"
      >
        <%= link_to 'Leave', leave_board_path(@board), class: 'dropdown-item link-danger',
          data: { turbo_method: 'put', turbo_confirm: "Are you sure?" } %>
      </li>
      <li
        data-controller="state-driven"
        data-state-driven-key-value="owned"
        data-state-driven-state-outlet="#user_board_state"
      >
        <%= link_to 'Delete', board_path(@board), class: 'dropdown-item link-danger',
          data: { turbo_method: 'delete', turbo_confirm: "Are you sure?" } %>
      </li>
    </ul>
  </div>
</div>
